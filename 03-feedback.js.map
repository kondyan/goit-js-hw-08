{"version":3,"file":"03-feedback.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport '../css/common.css';\nimport '../css/03-feedback.css';\n\nconst feedbackForm = document.querySelector('.feedback-form');\nconst emailInput = feedbackForm.childNodes[1].childNodes[1];\nconst textarea = feedbackForm.childNodes[3].childNodes[1];\n\nconst STORAGE_KEY_EMAIL = 'feedback-form-emailInput-state';\nconst STORAGE_KEY_TEXT = 'feedback-form-textarea-state';\n\ntextarea.addEventListener('input', throttle(onTextareaInput, 1000));\nemailInput.addEventListener('input', throttle(onEmailInput, 1000));\nfeedbackForm.addEventListener('submit', onFormSubmit);\n\npopulateTextarea();\n\n// saving textarea and email in localstorage\nfunction onTextareaInput(evt) {\n  const message = evt.target.value;\n\n  localStorage.setItem(STORAGE_KEY_TEXT, message);\n}\n\nfunction onEmailInput(evt) {\n  const message = evt.target.value;\n\n  localStorage.setItem(STORAGE_KEY_EMAIL, message);\n}\n\n// sending form simulation\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  evt.currentTarget.reset();\n  localStorage.removeItem(STORAGE_KEY_TEXT);\n  localStorage.removeItem(STORAGE_KEY_EMAIL);\n}\n\nfunction populateTextarea() {\n  const savedMessage = localStorage.getItem(STORAGE_KEY_TEXT);\n  const savedEmail = localStorage.getItem(STORAGE_KEY_EMAIL);\n\n  if (savedMessage) {\n    textarea.value = savedMessage;\n  }\n\n  if (savedEmail) {\n    emailInput.value = savedEmail;\n  }\n}\n"],"names":["feedbackForm","emailInput","textarea","STORAGE_KEY_EMAIL","STORAGE_KEY_TEXT","throttle","onTextareaInput","onEmailInput","onFormSubmit","populateTextarea","evt","message","savedMessage","savedEmail"],"mappings":"wIAIA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAaD,EAAa,WAAW,CAAC,EAAE,WAAW,CAAC,EACpDE,EAAWF,EAAa,WAAW,CAAC,EAAE,WAAW,CAAC,EAElDG,EAAoB,iCACpBC,EAAmB,+BAEzBF,EAAS,iBAAiB,QAASG,EAASC,EAAiB,GAAI,CAAC,EAClEL,EAAW,iBAAiB,QAASI,EAASE,EAAc,GAAI,CAAC,EACjEP,EAAa,iBAAiB,SAAUQ,CAAY,EAEpDC,IAGA,SAASH,EAAgBI,EAAK,CAC5B,MAAMC,EAAUD,EAAI,OAAO,MAE3B,aAAa,QAAQN,EAAkBO,CAAO,CAChD,CAEA,SAASJ,EAAaG,EAAK,CACzB,MAAMC,EAAUD,EAAI,OAAO,MAE3B,aAAa,QAAQP,EAAmBQ,CAAO,CACjD,CAGA,SAASH,EAAaE,EAAK,CACzBA,EAAI,eAAc,EAElBA,EAAI,cAAc,QAClB,aAAa,WAAWN,CAAgB,EACxC,aAAa,WAAWD,CAAiB,CAC3C,CAEA,SAASM,GAAmB,CAC1B,MAAMG,EAAe,aAAa,QAAQR,CAAgB,EACpDS,EAAa,aAAa,QAAQV,CAAiB,EAErDS,IACFV,EAAS,MAAQU,GAGfC,IACFZ,EAAW,MAAQY,EAEvB"}