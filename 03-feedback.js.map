{"version":3,"file":"03-feedback.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nimport '../css/common.css';\nimport '../css/03-feedback.css';\n\nconst feedbackForm = document.querySelector('.feedback-form');\nconst emailInput = feedbackForm.childNodes[1].childNodes[1];\nconst textarea = feedbackForm.childNodes[3].childNodes[1];\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nfeedbackForm.addEventListener('input', throttle(onInput, 200));\nfeedbackForm.addEventListener('submit', onFormSubmit);\n\nconst formData = {};\n\npopulateInputs();\n\n// saving inputs in localstorage\nfunction onInput(evt) {\n  if (evt.currentTarget === evt.target) {\n    return;\n  }\n  const message = evt.target.value;\n\n  formData[evt.target.name] = message;\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\n// sending form simulation\nfunction onFormSubmit(evt) {\n  evt.preventDefault();\n\n  evt.currentTarget.reset();\n  localStorage.removeItem(STORAGE_KEY);\n}\n\n// sending data back to the input areas\nfunction populateInputs() {\n  const savedData = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\n  if (savedData) {\n    emailInput.value = savedData.email;\n    textarea.value = savedData.message;\n  }\n}\n"],"names":["feedbackForm","emailInput","textarea","STORAGE_KEY","throttle","onInput","onFormSubmit","formData","populateInputs","evt","message","savedData"],"mappings":"wIAIA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,EACtDC,EAAaD,EAAa,WAAW,CAAC,EAAE,WAAW,CAAC,EACpDE,EAAWF,EAAa,WAAW,CAAC,EAAE,WAAW,CAAC,EAElDG,EAAc,sBAEpBH,EAAa,iBAAiB,QAASI,EAASC,EAAS,GAAG,CAAC,EAC7DL,EAAa,iBAAiB,SAAUM,CAAY,EAEpD,MAAMC,EAAW,CAAA,EAEjBC,IAGA,SAASH,EAAQI,EAAK,CACpB,GAAIA,EAAI,gBAAkBA,EAAI,OAC5B,OAEF,MAAMC,EAAUD,EAAI,OAAO,MAE3BF,EAASE,EAAI,OAAO,IAAI,EAAIC,EAE5B,aAAa,QAAQP,EAAa,KAAK,UAAUI,CAAQ,CAAC,CAC5D,CAGA,SAASD,EAAaG,EAAK,CACzBA,EAAI,eAAc,EAElBA,EAAI,cAAc,QAClB,aAAa,WAAWN,CAAW,CACrC,CAGA,SAASK,GAAiB,CACxB,MAAMG,EAAY,KAAK,MAAM,aAAa,QAAQR,CAAW,CAAC,EAE1DQ,IACFV,EAAW,MAAQU,EAAU,MAC7BT,EAAS,MAAQS,EAAU,QAE/B"}